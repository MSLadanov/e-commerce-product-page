{"ast":null,"code":"var _jsxFileName = \"/Users/mihailladanov/Documents/e-commerce/e-commerce-product-page/src/components/MobileDropdown/AccountDropdown.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getToken } from '../../redux/slices/userSlice';\nimport { getUserData } from '../../redux/slices/userSlice';\nimport { fetchData } from '../../redux/slices/userSlice';\nimport { signOut } from '../../redux/slices/userSlice';\nimport { SignedDropdown } from '../Header/Dropdown/SignedDropdown';\nimport { UnsignedDropdown } from '../Header/Dropdown/UnsignedDropdown';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AccountDropdown = () => {\n  _s();\n  const token = useSelector(getToken);\n  const userData = useSelector(getUserData);\n  const dispatch = useDispatch();\n  const [userImage, setUserImage] = useState(\"/images/image-user.png\");\n  const getUserInfo = async () => {\n    await axios.get(\"http://localhost:3001/api/user/info/\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(fetchData(res.data));\n    }).catch(err => {\n      if (err.response.status === 401) {\n        dispatch(signOut());\n      }\n    });\n  };\n  useEffect(() => {\n    if (token !== null) {\n      getUserInfo();\n    }\n  }, [token]);\n  useEffect(() => {\n    if (userData !== null) {\n      setUserImage(`http://localhost:3001/${userData.img}`);\n    }\n  }, [userData]);\n  if (token !== null && userData !== null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dropdown active\",\n      children: /*#__PURE__*/_jsxDEV(SignedDropdown, {\n        userImage: userImage,\n        setUserImage: setUserImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dropdown active\",\n      children: /*#__PURE__*/_jsxDEV(UnsignedDropdown, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n};\n_s(AccountDropdown, \"+8bjpdc2waXugVh/xjFI2uYdhK8=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = AccountDropdown;\nvar _c;\n$RefreshReg$(_c, \"AccountDropdown\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","getToken","getUserData","fetchData","signOut","SignedDropdown","UnsignedDropdown","axios","jsxDEV","_jsxDEV","AccountDropdown","_s","token","userData","dispatch","userImage","setUserImage","getUserInfo","get","headers","Authorization","then","res","data","catch","err","response","status","img","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/mihailladanov/Documents/e-commerce/e-commerce-product-page/src/components/MobileDropdown/AccountDropdown.tsx"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getToken } from '../../redux/slices/userSlice';\nimport { getUserData } from '../../redux/slices/userSlice';\nimport { fetchData } from '../../redux/slices/userSlice';\nimport { signOut } from '../../redux/slices/userSlice';\nimport { SignedDropdown } from '../Header/Dropdown/SignedDropdown';\nimport { UnsignedDropdown } from '../Header/Dropdown/UnsignedDropdown';\nimport axios from 'axios';\n\n\nexport const AccountDropdown = () => {\n  const token = useSelector(getToken);\n  const userData = useSelector(getUserData);\n  const dispatch = useDispatch();\n  const [userImage, setUserImage] = useState(\"/images/image-user.png\");\n  const getUserInfo = async () => {\n    await axios\n      .get(\"http://localhost:3001/api/user/info/\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        dispatch(fetchData(res.data));\n      }).catch((err) => {\n        if(err.response.status === 401){\n          dispatch(signOut())\n        }\n      });\n  };\n  useEffect(() => {\n    if (token !== null) {\n      getUserInfo();\n    }\n  }, [token]);\n\n  useEffect(() => {\n    if (userData !== null) {\n      setUserImage(`http://localhost:3001/${userData.img}`);\n    }\n  }, [userData]);\n  if (token !== null && userData !== null) {\n    return (\n      <div\n        className=\"dropdown active\"\n      >\n        <SignedDropdown userImage={userImage} setUserImage={setUserImage} />\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"dropdown active\">\n        <UnsignedDropdown />\n      </div>\n    );\n  }\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,WAAW,QAAQ,8BAA8B;AAC1D,SAASC,SAAS,QAAQ,8BAA8B;AACxD,SAASC,OAAO,QAAQ,8BAA8B;AACtD,SAASC,cAAc,QAAQ,mCAAmC;AAClE,SAASC,gBAAgB,QAAQ,qCAAqC;AACtE,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG1B,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAMC,KAAK,GAAGb,WAAW,CAACE,QAAQ,CAAC;EACnC,MAAMY,QAAQ,GAAGd,WAAW,CAACG,WAAW,CAAC;EACzC,MAAMY,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,wBAAwB,CAAC;EACpE,MAAMoB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,MAAMV,KAAK,CACRW,GAAG,CAAC,sCAAsC,EAAE;MAC3CC,OAAO,EAAE;QACPC,aAAa,EAAG,UAASR,KAAM;MACjC;IACF,CAAC,CAAC,CACDS,IAAI,CAAEC,GAAG,IAAK;MACbR,QAAQ,CAACX,SAAS,CAACmB,GAAG,CAACC,IAAI,CAAC,CAAC;IAC/B,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;MAChB,IAAGA,GAAG,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAC;QAC7Bb,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC;MACrB;IACF,CAAC,CAAC;EACN,CAAC;EACDN,SAAS,CAAC,MAAM;IACd,IAAIc,KAAK,KAAK,IAAI,EAAE;MAClBK,WAAW,CAAC,CAAC;IACf;EACF,CAAC,EAAE,CAACL,KAAK,CAAC,CAAC;EAEXd,SAAS,CAAC,MAAM;IACd,IAAIe,QAAQ,KAAK,IAAI,EAAE;MACrBG,YAAY,CAAE,yBAAwBH,QAAQ,CAACe,GAAI,EAAC,CAAC;IACvD;EACF,CAAC,EAAE,CAACf,QAAQ,CAAC,CAAC;EACd,IAAID,KAAK,KAAK,IAAI,IAAIC,QAAQ,KAAK,IAAI,EAAE;IACvC,oBACEJ,OAAA;MACEoB,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAE3BrB,OAAA,CAACJ,cAAc;QAACU,SAAS,EAAEA,SAAU;QAACC,YAAY,EAAEA;MAAa;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjE,CAAC;EAEV,CAAC,MAAM;IACL,oBACEzB,OAAA;MAAKoB,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC9BrB,OAAA,CAACH,gBAAgB;QAAAyB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjB,CAAC;EAEV;AACF,CAAC;AAAAvB,EAAA,CA9CYD,eAAe;EAAA,QACZX,WAAW,EACRA,WAAW,EACXC,WAAW;AAAA;AAAAmC,EAAA,GAHjBzB,eAAe;AAAA,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}