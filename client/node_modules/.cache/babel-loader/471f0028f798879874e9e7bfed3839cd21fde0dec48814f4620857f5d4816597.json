{"ast":null,"code":"var _jsxFileName = \"/Users/mihailladanov/Documents/e-commerce/e-commerce-product-page/src/components/Routes/UsersOrders/AllOrdersDetails.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getToken } from \"../../../redux/slices/userSlice\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AllOrdersDetails = ({\n  order\n}) => {\n  _s();\n  const ref = useRef(document.createElement(\"div\"));\n  const statusHandlerRef = useRef(document.createElement('div'));\n  const [userInfo, setUserInfo] = useState({\n    name: \"\",\n    surname: \"\",\n    email: \"\",\n    img: \"\"\n  });\n  const token = useSelector(getToken);\n  const getFormattedDate = date => {\n    const formattedDate = date.split(\"T\");\n    const datePart = formattedDate[0].match(/\\d+/g),\n      year = datePart[0].substring(2),\n      month = datePart[1],\n      day = datePart[2];\n    return day + \".\" + month + \".\" + year;\n  };\n  const convertArray = arr => {\n    const convertedArray = JSON.parse(arr.replace(\"/\"));\n    return convertedArray;\n  };\n  const deleteOrder = async id => {\n    await axios({\n      method: \"delete\",\n      url: `http://localhost:3001/api/basket/delete/${id}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    });\n  };\n  const getUserInfo = async id => {\n    await axios({\n      method: \"get\",\n      url: `http://localhost:3001/api/user/info/${id}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => setUserInfo({\n      ...res.data\n    })).catch(err => console.log(err));\n  };\n  useEffect(() => {\n    getUserInfo(order.userId);\n  }, []);\n  const openDetailsDropdown = () => {\n    if (ref.current.style.height !== '0px') {\n      ref.current.style.height = '0px';\n    } else {\n      ref.current.style.height = ref.current.scrollHeight + 'px';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"all-orders-card\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"arrow\",\n        src: \"/images/icon-next.svg\",\n        alt: \"\",\n        onClick: () => openDetailsDropdown()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: order.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: order.data.brand\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"all-orders-card-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: userInfo.name + \" \" + userInfo.surname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: userInfo.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: order.address\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: order.sum\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        ref: statusHandlerRef,\n        children: order.status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: getFormattedDate(order.updatedAt)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cancel-order-btn\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/images/icon-delete.svg\",\n          alt: \"delete\",\n          title: \"Delete order\",\n          onClick: () => deleteOrder(order.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"all-orders-details-container\",\n      ref: ref,\n      children: convertArray(order.data).map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"all-orders-cart-data-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:3001/${item.img}`,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.brand\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.size\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AllOrdersDetails, \"PrKQf3VN6W1umpRK8yb00A7SGsM=\", false, function () {\n  return [useSelector];\n});\n_c = AllOrdersDetails;\nvar _c;\n$RefreshReg$(_c, \"AllOrdersDetails\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useSelector","getToken","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","AllOrdersDetails","order","_s","ref","document","createElement","statusHandlerRef","userInfo","setUserInfo","name","surname","email","img","token","getFormattedDate","date","formattedDate","split","datePart","match","year","substring","month","day","convertArray","arr","convertedArray","JSON","parse","replace","deleteOrder","id","method","url","headers","Authorization","getUserInfo","then","res","data","catch","err","console","log","userId","openDetailsDropdown","current","style","height","scrollHeight","children","className","src","alt","onClick","fileName","_jsxFileName","lineNumber","columnNumber","brand","address","sum","status","updatedAt","title","map","item","index","size","_c","$RefreshReg$"],"sources":["/Users/mihailladanov/Documents/e-commerce/e-commerce-product-page/src/components/Routes/UsersOrders/AllOrdersDetails.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport { useSelector } from 'react-redux';\nimport { getToken } from \"../../../redux/slices/userSlice\";\nimport axios from 'axios';\n\nexport const AllOrdersDetails = ({order} :any) => {\n  const ref = useRef(document.createElement(\"div\"));\n  const statusHandlerRef = useRef(document.createElement('div'))\n  const [userInfo, setUserInfo] = useState({\n    name: \"\",\n    surname: \"\",\n    email: \"\",\n    img: \"\",\n  });\n  const token = useSelector(getToken);\n  const getFormattedDate = (date: any) => {\n    const formattedDate = date.split(\"T\");\n    const datePart = formattedDate[0].match(/\\d+/g),\n      year = datePart[0].substring(2),\n      month = datePart[1],\n      day = datePart[2];\n    return day + \".\" + month + \".\" + year;\n  };\n  const convertArray = (arr: any) => {\n    const convertedArray = JSON.parse(arr.replace(\"/\"));\n    return convertedArray;\n  };\n  const deleteOrder = async (id: any) => {\n    await axios({\n      method: \"delete\",\n      url: `http://localhost:3001/api/basket/delete/${id}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    });\n  };\n  const getUserInfo = async (id: any) => {\n    await axios({\n      method: \"get\",\n      url: `http://localhost:3001/api/user/info/${id}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => setUserInfo({ ...res.data }))\n      .catch((err) => console.log(err));\n  };\n  useEffect(() => {\n    getUserInfo(order.userId);\n  }, []);\n\n  const openDetailsDropdown = () => {\n    if(ref.current.style.height !== '0px'){\n      ref.current.style.height = '0px'\n    } else {\n      ref.current.style.height = ref.current.scrollHeight + 'px'\n    }\n  };\n\n  return (\n    <>\n      <div className=\"all-orders-card\" >\n        {\" \"}\n        <img className='arrow' src=\"/images/icon-next.svg\" alt=\"\" onClick={() => openDetailsDropdown()} />\n        <p>{order.id}</p>\n        <p>{order.data.brand}</p>\n        <div className=\"all-orders-card-data\">\n          <p>{userInfo.name + \" \" + userInfo.surname}</p>\n          <p>{userInfo.email}</p>\n        </div>\n        <p>{order.address}</p>\n        <p>{order.sum}</p>\n        <p ref={statusHandlerRef}>{order.status}</p>\n        <p>{getFormattedDate(order.updatedAt)}</p>\n        <div className=\"cancel-order-btn\">\n          <img\n            src=\"/images/icon-delete.svg\"\n            alt=\"delete\"\n            title=\"Delete order\"\n            onClick={() => deleteOrder(order.id)}\n          />\n        </div>\n      </div>\n      <div className=\"all-orders-details-container\" ref={ref}>\n        {convertArray(order.data).map((item: any, index: any) => {\n          return (\n            <div className=\"all-orders-cart-data-details\" key={index}>\n              <img src={`http://localhost:3001/${item.img}`} alt=\"\" />\n              <p>{item.brand}</p>\n              <p>{item.name}</p>\n              <p>{item.size}</p>\n            </div>\n          );\n        })}\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}